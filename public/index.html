<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>FPS Auto-Lock PWA</title>
Â  <link rel="manifest" href="/manifest.json">
Â  <meta name="theme-color" content="#00ff00">
Â  <style>
Â  Â  body { background:#000; color:#0f0; font-family:sans-serif; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; margin:0;}
Â  Â  #installBtn { position:fixed; bottom:20px; right:20px; padding:14px 22px; font-size:16px; background:#00ff00; color:#000; border:none; border-radius:10px; z-index:9999; display:none; cursor:pointer;}
Â  </style>
</head>
<body>

<h1>FPS Auto-Lock PWA</h1>
<p>Status: <span id="serverStatus">Checking...</span></p>

<button id="installBtn">ğŸ“² Install App</button>

<script>
Â  // ------------------------------
Â  // 1ï¸âƒ£ SERVICE WORKER
Â  // ------------------------------
Â  if ('serviceWorker' in navigator) {
Â  Â  navigator.serviceWorker.register('/sw.js')
Â  Â  Â  .then(() => console.log('âœ… SW registered'))
Â  Â  Â  .catch(err => console.error('SW error', err));
Â  }

Â  // ------------------------------
Â  // 2ï¸âƒ£ INSTALL PROMPT
Â  // ------------------------------
Â  let deferredPrompt;
Â  const installBtn = document.getElementById('installBtn');

Â  window.addEventListener('beforeinstallprompt', (e) => {
Â  Â  e.preventDefault();
Â  Â  deferredPrompt = e;
Â  Â  installBtn.style.display = 'block';
Â  });

Â  installBtn.addEventListener('click', async () => {
Â  Â  if (!deferredPrompt) return;
Â  Â  deferredPrompt.prompt();
Â  Â  await deferredPrompt.userChoice;
Â  Â  deferredPrompt = null;
Â  Â  installBtn.style.display = 'none';
Â  });

Â  window.addEventListener('appinstalled', () => {
Â  Â  installBtn.style.display = 'none';
Â  Â  console.log('PWA Installed');
Â  });

Â  // ------------------------------
Â  // 3ï¸âƒ£ SERVER CALL
Â  // ------------------------------
Â  const SERVER_URL = 'https://tunnelling-website.onrender.com';

Â  async function checkServerStatus() {
Â  Â  try {
Â  Â  Â  const res = await fetch(`${SERVER_URL}/api/status`);
Â  Â  Â  const data = await res.json();
Â  Â  Â  document.getElementById('serverStatus').textContent = data.status || 'online';
Â  Â  } catch (err) {
Â  Â  Â  console.error('Server fetch error', err);
Â  Â  Â  document.getElementById('serverStatus').textContent = 'Offline / Error';
Â  Â  }
Â  }

Â  checkServerStatus();
</script>

</body>
</html>
